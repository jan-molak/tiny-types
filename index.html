<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Home | tiny-types</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KCJMHPK');</script><meta name="google-site-verification" content="mpKDC5KqgH5qYaWKMHWJoZn7iFGd4EYF9CtYYRSexYA"><link rel="stylesheet" href="./inject/css/0-custom.css"><meta name="description" content="A tiny library that brings Tiny Types to JavaScript and TypeScript"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="tiny-types"><meta property="twitter:description" content="A tiny library that brings Tiny Types to JavaScript and TypeScript"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/jan-molak/tiny-types.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/TinyType.ts~TinyType.html">TinyType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TinyTypeOf">TinyTypeOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ensure">ensure</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-match">match</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-check">check</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#objects">objects</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-deprecated">deprecated</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#predicates">predicates</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/predicates/Predicate.ts~Failure.html">Failure</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/predicates/Predicate.ts~Predicate.html">Predicate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/predicates/Predicate.ts~Result.html">Result</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/predicates/Predicate.ts~Success.html">Success</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-and">and</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-endsWith">endsWith</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-hasLengthOf">hasLengthOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isArray">isArray</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isBoolean">isBoolean</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isDefined">isDefined</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isEqualTo">isEqualTo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isGreaterThan">isGreaterThan</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isGreaterThanOrEqualTo">isGreaterThanOrEqualTo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isInRange">isInRange</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isInstanceOf">isInstanceOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isInteger">isInteger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isLessThan">isLessThan</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isLessThanOrEqualTo">isLessThanOrEqualTo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isNotBlank">isNotBlank</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isNumber">isNumber</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isOneOf">isOneOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isString">isString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-matches">matches</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-or">or</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-property">property</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-startsWith">startsWith</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="tiny-types">Tiny Types</h1><p><a href="https://badge.fury.io/js/tiny-types"><img src="https://badge.fury.io/js/tiny-types.svg" alt="npm version"></a>
<a href="https://github.com/jan-molak/tiny-types/actions"><img src="https://github.com/jan-molak/tiny-types/workflows/build/badge.svg" alt="Build Status"></a>
<a href="https://coveralls.io/github/jan-molak/tiny-types?branch=master"><img src="https://coveralls.io/repos/github/jan-molak/tiny-types/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="http://commitizen.github.io/cz-cli/"><img src="https://img.shields.io/badge/commitizen-friendly-brightgreen.svg" alt="Commitizen friendly"></a>
<a href="https://npm-stat.com/charts.html?package=tiny-types"><img src="https://img.shields.io/npm/dm/tiny-types.svg" alt="npm"></a>
<a href="https://snyk.io/test/github/jan-molak/tiny-types"><img src="https://snyk.io/test/github/jan-molak/tiny-types/badge.svg" alt="Known Vulnerabilities"></a>
<a href="https://github.com/jan-molak/tiny-types"><img src="https://img.shields.io/github/stars/jan-molak/tiny-types" alt="GitHub stars"></a></p>
<p><a href="https://twitter.com/@JanMolak"><img src="https://img.shields.io/twitter/follow/JanMolak?style=social" alt="Twitter Follow"></a></p>
<p>TinyTypes is an <a href="https://www.npmjs.com/package/tiny-types">npm module</a> that makes it easy for TypeScript and JavaScript
projects to give domain meaning to primitive types. It also helps to avoid all sorts of bugs 
and makes your code easier to refactor. <a href="https://janmolak.com/tiny-types-in-typescript-4680177f026e">Learn more.</a></p>
<h2 id="installation">Installation</h2><p>To install the module from npm:</p>
<pre><code><code class="source-code prettyprint">npm install --save tiny-types</code>
</code></pre><h2 id="api-docs">API Docs</h2><p>API documentation is available at <a href="https://jan-molak.github.io/tiny-types/">jan-molak.github.io/tiny-types/</a>.</p>
<h2 id="for-enterprise">For Enterprise</h2><p><a href="https://tidelift.com/subscription/pkg/npm-tiny-types?utm_source=npm-tiny-types&amp;utm_medium=referral&amp;utm_campaign=enterprise&amp;utm_term=repo" target="_blank"><img width="163" height="24" src="https://cdn2.hubspot.net/hubfs/4008838/website/logos/logos_for_download/Tidelift_primary-logo.png" class="tidelift-logo"></a></p>
<p>TinyTypes are available as part of the <a href="https://tidelift.com/subscription/pkg/npm-tiny-types?utm_source=npm-tiny-types&amp;utm_medium=referral&amp;utm_campaign=enterprise&amp;utm_term=repo">Tidelift Subscription</a>. The maintainers of TinyTypes and thousands of other packages are working with Tidelift to deliver one enterprise subscription that covers all of the open source you use. If you want the flexibility of open source and the confidence of commercial-grade software, this is for you. <a href="https://tidelift.com/subscription/pkg/npm-tiny-types?utm_source=npm-tiny-types&amp;utm_medium=referral&amp;utm_campaign=enterprise&amp;utm_term=repo">Learn more.</a></p>
<h2 id="defining-tiny-types">Defining Tiny Types</h2><blockquote>
<p>An int on its own is just a scalar with no meaning. With an object, even a small one, you are giving both the compiler 
and the programmer additional information  about what the value is and why it is being used.</p>
<p>&#x2010; <a href="http://www.xpteam.com/jeff/writings/objectcalisthenics.rtf">Jeff Bay, Object Calisthenics</a></p>
</blockquote>
<h3 id="single-value-types">Single-value types</h3><p>To define a single-value <code>TinyType</code> - extend from <code>TinyTypeOf&lt;T&gt;()</code>:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">import { TinyTypeOf } from &apos;tiny-types&apos;;

class FirstName extends TinyTypeOf&lt;string&gt;() {}
class LastName  extends TinyTypeOf&lt;string&gt;() {}
class Age       extends TinyTypeOf&lt;number&gt;() {}</code>
</code></pre>
<p>Every tiny type defined this way has
a <a href="https://www.typescriptlang.org/docs/handbook/classes.html#readonly-modifier">readonly property</a>
<code>value</code> of type <code>T</code>, which you can use to access the wrapped primitive value. For example:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">const firstName = new FirstName(&apos;Jan&apos;);

firstName.value === &apos;Jan&apos;;</code>
</code></pre>
<h4 id="equals">Equals</h4><p>Each tiny type object has an <code>equals</code> method, which you can use to compare it by value:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">const 
    name1 = new FirstName(&apos;Jan&apos;),
    name2 = new FirstName(&apos;Jan&apos;);

name1.equals(name2) === true; </code>
</code></pre>
<h4 id="tostring">ToString</h4><p>An additional feature of tiny types is a built-in <code>toString()</code> method:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">const name = new FirstName(&apos;Jan&apos;);

name.toString() === &apos;FirstName(value=Jan)&apos;;</code>
</code></pre>
<p>Which you can override if you want to:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">class Timestamp extends TinyTypeOf&lt;Date&gt;() {
    toString() {
        return `Timestamp(value=${this.value.toISOString()})`;
    }
}

const timestamp = new Timestamp(new Date());

timestampt.toString() === &apos;Timestamp(value=2018-03-12T00:30:00.000Z))&apos;</code>
</code></pre>
<h3 id="multi-value-and-complex-types">Multi-value and complex types</h3><p>If the tiny type you want to model has more than one value,
or you want to perform additional operations in the constructor,
extend from <code>TinyType</code> directly:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">import { TinyType } from &apos;tiny-types&apos;;

class Person extends TinyType {
    constructor(public readonly firstName: FirstName,
                public readonly lastName: LastName,
    ) {
        super();
    }
}
</code>
</code></pre>
<p>You can also mix and match both of the above definition styles:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">import { TinyType, TinyTypeOf } from &apos;tiny-types&apos;;

class UserName extends TinyTypeOf&lt;string&gt;() {}

class Timestamp extends TinyTypeOf&lt;Date&gt;() {
    toString() {
        return `Timestamp(value=${this.value.toISOString()})`;
    }
}

abstract class DomainEvent extends TinyTypeOf&lt;Timestamp&gt;() {}

class AccountCreated extends DomainEvent {
    constructor(public readonly username: UserName, timestamp: Timestamp) {
        super(timestamp);
    }
}

const event = new AccountCreated(new UserName(&apos;jan-molak&apos;), new Timestamp(new Date()));</code>
</code></pre>
<p>Even such complex types still have both the <code>equals</code> and <code>toString</code> methods:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">const 
    now = new Date(2018, 2, 12, 0, 30),
    event1 = new AccountCreated(new UserName(&apos;jan-molak&apos;), new Timestamp(now)),
    event2 = new AccountCreated(new UserName(&apos;jan-molak&apos;), new Timestamp(now));

event1.equals(event2) === true;

event1.toString() === &apos;AccountCreated(username=UserName(value=jan-molak), value=Timestamp(value=2018-03-12T00:30:00.000Z))&apos;</code>
</code></pre>
<h2 id="guaranteed-runtime-correctness">Guaranteed runtime correctness</h2><p>The best way to guarantee runtime correctness of your domain models is to ensure that no tiny type can ever hold invalid data at runtime.
This way, when a function receives an instance of a tiny type, it does not need to perform any checks on it and can simply trust that 
its value is correct. OK, but how do you guarantee that? </p>
<p>Let me show you an example. </p>
<p>Imagine that upon registering a customer on your website you need to ask them their age.
How would you model the concept of &quot;age&quot; in your system?</p>
<p>You might consider using a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number"><code>number</code></a> for this purpose:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">const age = 35;</code>
</code></pre>
<p>However, this is far from ideal as &quot;age&quot; is not just <em>any</em> number: it can&apos;t be negative, it has to be an integer, and it&apos;s highly unlikely that your customers would ever be <a href="https://www.ecma-international.org/ecma-262/10.0/index.html#sec-ecmascript-language-types-number-type">2&lt;sup&gt;53&lt;/sup&gt;-1 years old</a>.</p>
<p>All that means that there are certain <em>rules</em> that an object representing &quot;age&quot; needs to obey, certain <em>constraints</em> that its value has to meet in order to be considered valid.</p>
<p>You might have already guessed that my recommendation to you would be to define a tiny type representing <code>Age</code>, but not just that.
You should also take it a step further and use the <a href="https://jan-molak.github.io/tiny-types/function/index.html#static-function-ensure"><code>ensure</code></a> function together with other <a href="https://jan-molak.github.io/tiny-types/identifiers.html#predicates"><code>predicates</code></a> to describe the constraints the underlying value has to meet:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">import { TinyType, ensure, isDefined, isInteger, isInRange } from &apos;tiny-types&apos;

class Age extends TinyType {
  constructor(public readonly value: number) {
    ensure(&apos;Age&apos;, value, isDefined(), isInteger(), isInRange(0, 125));
  }
} </code>
</code></pre>
<p>With a tiny type defined as per the above code sample you can eliminate entire classes of errors. You also have one place in your
system where you define what &quot;age&quot; means.</p>
<h2 id="serialisation-to-json">Serialisation to JSON</h2><p>Every TinyType defines 
a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON%28%29_behavior"><code>toJSON()</code> method</a>, 
which returns a JSON representation of the object. This means that you can use TinyTypes 
as <a href="https://en.wikipedia.org/wiki/Data_transfer_object">Data Transfer Objects</a>.</p>
<p>Single-value TinyTypes are serialised to the value itself:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">import { TinyTypeOf } from &apos;tiny-types&apos;;

class FirstName extends TinyTypeOf&lt;string&gt;() {}

const firstName = new FirstName(&apos;Jan&apos;);

firstName.toJSON() === &apos;Jan&apos;</code>
</code></pre>
<p>Complex TinyTypes are serialised recursively:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">import { TinyType, TinyTypeOf } from &apos;tiny-types&apos;;

class FirstName extends TinyTypeOf&lt;string&gt;() {}
class LastName extends TinyTypeOf&lt;string&gt;() {}
class Age extends TinyTypeOf&lt;number&gt;() {}
class Person extends TinyType {
    constructor(
        public readonly firstName: FirstName,
        public readonly lastName: LastName,
        public readonly age: Age,
    ) {
        super();
    }
}

const person = new Person(new FirstName(&apos;Bruce&apos;), new LastName(&apos;Smith&apos;), new Age(55));

person.toJSON() === { firstName: &apos;Bruce&apos;, lastName: &apos;Smith&apos;, age: 55 }</code>
</code></pre>
<h2 id="de-serialisation-from-json">De-serialisation from JSON</h2><p>Although you could define standalone de-serialisers, I like to define them 
as <a href="https://en.wikipedia.org/wiki/Factory_method_pattern">static factory methods</a> on the TinyTypes themselves:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">import { TinyTypeOf } from &apos;tiny-types&apos;;

class FirstName extends TinyTypeOf&lt;string&gt;() {
    static fromJSON = (v: string) =&gt; new FirstName(v);
}

const firstName = new FirstName(&apos;Jan&apos;),

FirstName.fromJSON(firstName.toJSON()).equals(firstName) === true</code>
</code></pre>
<p>When working with complex TinyTypes, you can use the (experimental) <code>Serialised</code> interface
to reduce the likelihood of your custom <code>fromJSON</code> method being incompatible with <code>toJSON</code>:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">import { TinyTypeOf, TinyType, Serialised } from &apos;tiny-types&apos;;

class EmployeeId extends TinyTypeOf&lt;number&gt;() {
    static fromJSON = (id: number) =&gt; new EmployeeId(id);
}

class DepartmentId extends TinyTypeOf&lt;string&gt;() {
    static fromJSON = (id: string) =&gt; new DepartmentId(id);
}

class Allocation extends TinyType {
    static fromJSON = (o: Serialised&lt;Allocation&gt;) =&gt; new Allocation(
        EmployeeId.fromJSON(o.employeeId as number),
        DepartmentId.fromJSON(o.departmentId as string),
    )

    constructor(public readonly employeeId: EmployeeId, public readonly departmentId: DepartmentId) {
        super();
    }
}</code>
</code></pre>
<p>This way de-serialising a complex type becomes trivial:</p>
<pre><code class="lang-typescript"><code class="source-code prettyprint">const allocation = new Allocation(new EmployeeId(1), new DepartmentId(&apos;engineering&apos;));

const deserialised = Allocation.fromJSON({ departmentId: &apos;engineering&apos;, employeeId: 1 });

allocation.equals(deserialised) === true</code>
</code></pre>
<p>Although <code>Serialised</code> is by no means 100% foolproof as it&apos;s only limited to checking whether your input JSON has the same fields
as the object you&apos;re trying to de-serialise, it can at least help you to avoid errors caused by typos.</p>
<h2 id="your-feedback-matters-">Your feedback matters!</h2><p>Do you find TinyTypes useful? <a href="https://github.com/jan-molak/tiny-types">Give it a star!</a> &#x2605;</p>
<p>Found a bug? Need a feature? Raise <a href="https://github.com/jan-molak/tiny-types/issues?state=open">an issue</a>
or submit a pull request.</p>
<p>Have feedback? Let me know on twitter: <a href="https://twitter.com/JanMolak">@JanMolak</a></p>
<p><a href="https://twitter.com/@JanMolak"><img src="https://img.shields.io/twitter/follow/JanMolak?style=social" alt="Twitter Follow"></a></p>
<h2 id="before-you-go">Before you go</h2><p>&#x2615; If TinyTypes have made your life a little bit easier and saved at least $5 worth of your time,
please consider repaying the favour and <a href="https://github.com/sponsors/jan-molak">buying me a coffee</a> via <a href="https://github.com/sponsors/jan-molak">Github Sponsors</a>. Thanks! &#x1F64F;</p>
<h2 id="license">License</h2><p>TinyTypes library is licensed under the <a href="https://github.com/jan-molak/tiny-types/blob/master/LICENSE.md">Apache-2.0</a> license.</p>
<p><em>- Copyright &#xA9; 2018- <a href="https://janmolak.com">Jan Molak</a></em></p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>


</body></html>